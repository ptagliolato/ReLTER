<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>eLTER get_site_MODIS function — get_site_MODIS • ReLTER</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="eLTER get_site_MODIS function — get_site_MODIS"><meta property="og:description" content="This function acquires MODIS products
from MODIS Land Products archive,
crops to an eLTER site boundary, and
plots a time series of the MODIS derived variable averaged over
the eLTER site."><meta property="og:image" content="https://oggioniale.github.io/ReLTER/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-12345678-0"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-12345678-0');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ReLTER</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper"></span>
     
    Changelog
  </a>
</li>
<li>
  <a href="https://www.cnr.it/people/alessandro.oggioni" class="external-link">
    <span class="fa fa-user"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/oggioniale/ReLTER/" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>eLTER get_site_MODIS function</h1>
    <small class="dont-index">Source: <a href="https://github.com/oggioniale/ReLTER/blob/HEAD/R/get_site_MODIS.R" class="external-link"><code>R/get_site_MODIS.R</code></a></small>
    <div class="hidden name"><code>get_site_MODIS.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function acquires MODIS products
from MODIS Land Products archive,
crops to an eLTER site boundary, and
plots a time series of the MODIS derived variable averaged over
the eLTER site.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">get_site_MODIS</span><span class="op">(</span>
  <span class="va">deimsid</span>,
  <span class="va">earthdata_user</span>,
  <span class="va">earthdata_passwd</span>,
  product <span class="op">=</span> <span class="st">"Vegetation_Indexes_Monthly_1Km (M*D13A3)"</span>,
  from_date <span class="op">=</span> <span class="cn">NA</span>,
  to_date <span class="op">=</span> <span class="cn">NA</span>,
  bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NDVI"</span>, <span class="st">"EVI"</span><span class="op">)</span>,
  scale <span class="op">=</span> <span class="cn">TRUE</span>,
  save_ts_dir <span class="op">=</span> <span class="cn">NA</span>,
  out_folder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,
  show_products <span class="op">=</span> <span class="cn">FALSE</span>,
  show_bands <span class="op">=</span> <span class="cn">NA</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>deimsid</dt>
<dd><p>a `character`. The DEIMS ID of the site from
DEIMS-SDR website. More information about DEIMS ID from:
<a href="https://deims.org/docs/deimsid.html" class="external-link">page</a>.</p></dd>
<dt>earthdata_user</dt>
<dd><p>`character`. For authentication.
Please create an account on: https://urs.earthdata.nasa.gov/users/new
and enter authentication details here.</p></dd>
<dt>earthdata_passwd</dt>
<dd><p>`character` For authentication on Earthdata.</p></dd>
<dt>product</dt>
<dd><p>a `character`. The requested MODIS product.
Must be the full product name.
Use `show_products = TRUE` to get a list of products.
Some examples:
      "Vegetation_Indexes_Monthly_1Km (M*D13A3)"
        "LST_3band_emissivity_8day_1km (M*D21A2)"
    "LAI_8Days_500m (MCD15A2H)"
Default is "Vegetation_Indexes_Monthly_1Km (M*D13A3)"</p></dd>
<dt>from_date, </dt>
<dd><p>`character`, the start date for acquiring MODIS
formatted as YYYY.MM.DD
Must be later than 2000.02.01. (The earliest MODIS imagery was Feb 2000)</p></dd>
<dt>to_date, </dt>
<dd><p>`character`, the last date for acquiring MODIS
formatted as YYYY.MM.DD.</p></dd>
<dt>bands</dt>
<dd><p>`character`, string array of bands in the requested product.
Use the "show_bands" parameter first to get a list of available bands.
Some examples: "LST_Day_1km", or multiple bands as c("NDVI", "EVI")
Default is c("NDVI", "EVI").</p></dd>
<dt>scale</dt>
<dd><p>`boolean`. The MODIS raster values will be scaled (multiplied)
by a factor. Some MODIS products are scaled up and saved as 16 bit integers.
For example, Vegetation indices are scaled by 10000,
and Land surface temperatures are scaled by 50.
Scaling factors are derived from product metadata.
For additional details refer to the  MODIS Product Tables:
https://modis.gsfc.nasa.gov/data/dataprod/
Default TRUE (scaling applied)</p></dd>
<dt>save_ts_dir, </dt>
<dd><p>`character`. Full path to directory to save a CSV file
of the time series of site averaged MODIS bands values.
Default is NA (saving is disabled).
This directory is created if it does not exist.</p></dd>
<dt>out_folder, </dt>
<dd><p>`character`, Where to save the downloaded MODIS rasters
Default is tempdir().
(Note that if this parameter is left at default the downloaded MODIS rasters
will be deleted on exit, along with other temporary R files.)</p></dd>
<dt>show_products, </dt>
<dd><p>a `boolean`, if TRUE, then show a list of all
available MODIS products, and exit. Default is FALSE.</p></dd>
<dt>show_bands, </dt>
<dd><p>a `character`, the name of a MODIS product.
The parameter could be one of:
    "M*D13Q1", (Vegetation Indexes_16Days_250m),
    "M*D21A2", (LST_3band_emissivity_8day_1km),
    "MCD12Q1". (LandCover_Type_Yearly_500m)
When this parameter is supplied, show a list of the bands
for that product, and exit. Default is NA.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The function returns a SpatRaster object (from the `terra` package)
which contains a stack of all rasters for the requested product/bands
over the requested date interval.
The user should save the raster stack to disk, if necessary.
i.e. writeRaster(ds_site, "site_MODIS_dataset.tif")
The function also plots a time series graph of the site averaged values.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The Nasa [EarthData](https://urs.earthdata.nasa.gov/home) site
offers MODIS products as 8 day, 16 day and  monthly aggregations.
This function accesses those aggregations
selecting a subset from the `from_date` to the `to_date`,
then prepares site averaged values of the MODIS product,
and plots a time series of those averages.
In order to download from EarthData, you must register at
https://urs.earthdata.nasa.gov/users/new
and supply your username and password to this function.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Micha Silver, phD (2020) <a href="mailto:silverm@post.bgu.ac.il">silverm@post.bgu.ac.il</a></p>
<p>Alessandro Oggioni, phD (2020) <a href="mailto:oggioni.a@irea.cnr.it">oggioni.a@irea.cnr.it</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"> <span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"> <span class="va">deimsid</span> <span class="op">&lt;-</span>  <span class="st">"https://deims.org/bf2cb8dd-0d38-419b-aa9c-7d53337bd98e"</span></span>
<span class="r-in"> <span class="co"># Use MODIS Land Surface Temperature product</span></span>
<span class="r-in"> <span class="va">product</span> <span class="op">&lt;-</span>  <span class="st">"LST_3band_emissivity_8day_1km (M*D21A2)"</span></span>
<span class="r-in"> <span class="co"># Check what bands are available for that product</span></span>
<span class="r-in"> <span class="fu">get_site_MODIS</span><span class="op">(</span>show_bands <span class="op">=</span> <span class="st">"LST_3band_emissivity_8day_1km (M*D21A2)"</span><span class="op">)</span></span>
<span class="r-in"> <span class="co"># Use LST_Day_1KM and LST_Night_1KM</span></span>
<span class="r-in"> <span class="va">bands</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LST_Day_1KM"</span>, <span class="st">"LST_Night_1KM"</span><span class="op">)</span></span>
<span class="r-in"> <span class="co"># Acquire MODIS data</span></span>
<span class="r-in"> <span class="co"># (IMPORTANT: define personal authentication credentials)</span></span>
<span class="r-in"> <span class="va">MODIS_LST</span> <span class="op">&lt;-</span> <span class="fu">get_site_MODIS</span><span class="op">(</span>deimsid <span class="op">=</span> <span class="va">deimsid</span>,</span>
<span class="r-in">                            earthdata_user <span class="op">=</span> <span class="st">"your_USGS_username"</span>,</span>
<span class="r-in">                           earthdata_passwd <span class="op">=</span> <span class="st">"your_USGS_password"</span>,</span>
<span class="r-in">                           product <span class="op">=</span> <span class="va">product</span>,</span>
<span class="r-in">                           bands <span class="op">=</span> <span class="va">bands</span>,</span>
<span class="r-in">                           from_date<span class="op">=</span><span class="st">"2021.06.01"</span>, to_date <span class="op">=</span> <span class="st">"2021.07.31"</span><span class="op">)</span></span>
<span class="r-in"> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">nlyr</a></span><span class="op">(</span><span class="va">MODIS_LST</span><span class="op">)</span></span>
<span class="r-in"> <span class="co"># Show time series table</span></span>
<span class="r-in"> <span class="va">MODIS_LST_timeseries</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span></span>
<span class="r-in">   <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span class="r-in">           <span class="st">"Time_Series"</span>,</span>
<span class="r-in">           <span class="st">"MODIS_LST_Day_1KM_2021-06-02_2021-07-28.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"> <span class="va">MODIS_LST_timeseries</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alessandro Oggioni, Micha Silver, Paolo Tagliolato, Luigi Ranghetti.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

